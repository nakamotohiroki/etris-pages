(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{5824:function(t,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/play",function(){return i(9391)}])},3354:function(t,e,i){"use strict";i.d(e,{N:function(){return o}});var n=i(7294);let o=()=>{let[t,e]=(0,n.useState)([0,0]);return(0,n.useLayoutEffect)(()=>{let t=()=>{e([document.documentElement.clientWidth,document.documentElement.clientHeight])};return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),t}},9391:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return te}});var n=i(1965),o=i(7294),s=i(1163),r=i(9008),a=i.n(r),l=i(3221),h=i.n(l),c=i(2081);class d{getMinoId(){return this.minoId}setMinoId(t){this.minoId=t}getNowPositionX(){return this.nowPosition[1]}getNowPositionY(){return this.nowPosition[0]}getAnsPositionX(){return this.ansPosition[1]}getAnsPositionY(){return this.ansPosition[0]}setNowPosition(t){this.nowPosition=t}setAnsPosition(t){this.ansPosition=t}getMinoInfo(){return this.minoInfo}setMinoInfo(t){this.minoInfo=t}getRotate(){return this.rotate}checkNowPositionIsAnsPosition(){return this.nowPosition[0]===this.ansPosition[0]&&this.nowPosition[1]===this.ansPosition[1]&&0===this.rotate}right(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.nowPosition[1]+=1}left(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.nowPosition[1]-=1}down(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.nowPosition[0]+=t}up(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.nowPosition[0]-=t}minoRotateLeft90(){this.minoInfo=(0,c.lq)(this.minoInfo),this.rotate>0?this.rotate-=1:this.rotate=3}minoRotateRight90(){this.minoInfo=(0,c.lD)(this.minoInfo),this.rotate<3?this.rotate+=1:this.rotate=0}changeMinoNumber(t){for(let e=0;e<this.minoInfo.length;e++)for(let i=0;i<this.minoInfo[e].length;i++)""!==this.minoInfo[e][i]&&(this.minoInfo[e][i]=t.toString())}constructor(t,e){this.minoInfo=t,this.ansPosition=e,this.nowPosition=[-1,0],this.minoId="",this.rotate=0}}var f=i(2690);class u{addAllKeyEventHandle(){document.removeEventListener("keydown",this.keyBoardEvent),document.addEventListener("keydown",this.keyBoardEvent)}keyUpEvent(){this.isUseUp&&this.canUp()&&(this.nowMino.up(),this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()}}))}keyDownEvent(){this.nowMino.checkNowPositionIsAnsPosition()||(this.canDown()?(this.nowMino.down(),this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()}})):this.isUseUp?this.conflictCallback(this.nowMino.getMinoId()):this.gameOver())}keyRightEvent(){this.canRight()?(this.nowMino.right(),this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()}})):this.conflictCallback(this.nowMino.getMinoId())}keyLeftEvent(){this.canLeft()?(this.nowMino.left(),this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()}})):this.conflictCallback(this.nowMino.getMinoId())}keyLRotateEvent(){this.isUseRotate&&this.nowMinoRotateLeft90()?(this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()}})):this.conflictCallback(this.nowMino.getMinoId())}keyRRotateEvent(){this.isUseRotate&&this.nowMinoRotateRight90()?(this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()}})):this.conflictCallback(this.nowMino.getMinoId())}constructor(t,e,i,n,o,s,r,a,l,h,u,w){var m,g;this.getNowFieldShape=()=>this.nowFieldShape,this.getNowMino=()=>this.nowMino,this.start=()=>{this.isAlredyStart||(this.normalizeMinos(),this.createBlankField(),this.changeRandomNextMino(),this.addAllKeyEventHandle(),this.nowFieldShape=this.getChangeField(this.nowMino),this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()},isChangeMino:!0}),this.fallSpeed>=1&&(this.alwaysInterval=window.setInterval(this.always,this.fallSpeed)),this.isAlredyStart=!0)},this.createBlankField=()=>{for(let e=0;e<f.LA.blankHeight;e++){var t=[];for(let e=0;e<this.width;e++)t.push(["",0,!1,0]);this.nowFieldShape.unshift(t)}for(let t=0;t<this.normalizeMinosInfo.length;t++)for(let e=0;e<this.normalizeMinosInfo[t].length;e++)for(let i=0;i<this.normalizeMinosInfo[t][e].length;i++)this.normalizeMinosInfo[t][e][i].setAnsPosition([this.normalizeMinosInfo[t][e][i].getAnsPositionY()+f.LA.blankHeight,this.normalizeMinosInfo[t][e][i].getAnsPositionX()])},this.always=()=>{this.nowMino.checkNowPositionIsAnsPosition()?(this.contactCount=this.contactCount+1,this.confirmField(),this.changeRandomNextMino(),this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()},isChangeMino:!0})):this.canDown()?(this.nowMino.down(),this.nowFieldShape=this.getChangeField(this.nowMino),"function"==typeof this.render&&this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()}})):this.isUseUp||this.gameOver()},this.changeRandomNextMino=()=>{if(0===this.normalizeMinosInfo.length){this.gameClear();return}let t=Math.floor(Math.random()*this.normalizeMinosInfo.length),e=Math.floor(Math.random()*this.normalizeMinosInfo[t][0].length);if(this.nowMino=this.normalizeMinosInfo[t][0][e],this.isUseRotate){let t=Math.floor(4*Math.random());for(let e=0;e<t;e++)this.nowMino.minoRotateRight90()}this.resolveConflict(),this.normalizeMinosInfo[t][0][e]="",this.normalizeMinosInfo=(0,c.Op)(this.normalizeMinosInfo,"")},this.normalizeMinos=()=>{for(let t=0;t<this.nowFieldShape[0].length;t++){let e=[],i=this.findMinosFromPosition(t,this.nowFieldShape.length-1);if(null!==i){e.push([i]);let t=[1,1];for(;t.length>=1;){t=[];let i=e[e.length-1];for(let e=0;e<i.length;e++){let n=this.findAbobeMinos(i[e].getAnsPositionX(),i[e].getAnsPositionY(),i[e].getMinoInfo());if(null!==n)for(let e=0;e<n.length;e++)t.push(n[e])}t.length>=1&&e.push(t)}}e.length>=1&&this.normalizeMinosInfo.push(e)}},this.findAbobeMinos=(t,e,i)=>{let n=[];for(let o=0;o<i.length;o++)for(let s=0;s<i[o].length;s++)if(""!==i[o][s]){let i=this.findMinosFromPosition(s+t,o+e-1);null!==i&&n.push(i)}return n.length>0?n:null},this.findMinosFromPosition=(t,e)=>{for(let i=this.minosInfo.length-1;i>=0;i--){let n=this.minosInfo[i],o=n.getAnsPositionX(),s=n.getAnsPositionY(),r=n.getMinoInfo();if(r[0].length>t-o&&r.length>e-s&&e-s>=0&&t-o>=0&&""!==r[e-s][t-o])return this.minosInfo.splice(i,1),n}return null},this.changeNextMino=()=>{this.nowMino=this.minosInfo.shift()},this.canRight=()=>{let t=1,e=this.nowMino.getNowPositionX(),i=this.nowMino.getNowPositionY(),n=this.nowMino.getMinoInfo();for(;;){if(this.checkConflict(e+t,i,n))return!0;if(e+ ++t>this.width)return!1}},this.canLeft=()=>{let t=1,e=this.nowMino.getNowPositionX(),i=this.nowMino.getNowPositionY(),n=this.nowMino.getMinoInfo();for(;;){if(this.checkConflict(e-t,i,n))return!0;if(e-++t<0)return!1}},this.canDown=()=>{let t=1,e=this.nowMino.getNowPositionX(),i=this.nowMino.getNowPositionY(),n=this.nowMino.getMinoInfo();for(;;){if(this.checkConflict(e,i+t,n))return!0;if(i+ ++t>this.nowFieldShape.length)return!1}},this.canUp=()=>{let t=1,e=this.nowMino.getNowPositionX(),i=this.nowMino.getNowPositionY(),n=this.nowMino.getMinoInfo();for(;;){if(this.checkConflict(e,i-t,n))return!0;if(i-++t<0)return!1}},this.nowMinoRotateLeft90=()=>(this.nowMino.minoRotateLeft90(),!!this.checkConflictField(this.nowMino.getNowPositionX(),this.nowMino.getNowPositionY(),this.nowMino.getMinoInfo())||(this.nowMino.minoRotateRight90(),!1)),this.nowMinoRotateRight90=()=>(this.nowMino.minoRotateRight90(),!!this.checkConflictField(this.nowMino.getNowPositionX(),this.nowMino.getNowPositionY(),this.nowMino.getMinoInfo())||(this.nowMino.minoRotateLeft90(),!1)),this.checkConflict=(t,e,i)=>{for(let n=0;n<i.length;n++)for(let o=0;o<i[n].length;o++)if(""!==i[n][o]&&(this.nowFieldShape.length<e+n+1||this.nowFieldShape[0].length<t+o+1||t+o<0||e+n<0||2===this.nowFieldShape[e+n][t+o][1]))return!1;return!0},this.checkConflictField=(t,e,i)=>{for(let n=0;n<i.length;n++)for(let o=0;o<i[n].length;o++)if(""!==i[n][o]&&(this.nowFieldShape.length<e+n+1||this.nowFieldShape[0].length<t+o+1||t+o<0||e+n<0))return!1;return!0},this.checkOverHangRight=(t,e,i)=>{for(let e=0;e<i.length;e++)for(let n=0;n<i[e].length;n++)if(""!==i[e][n]&&this.nowFieldShape[0].length<t+n+1)return!1;return!0},this.resolveConflict=()=>{let t,e,i;let n=1;for(t=this.nowMino.getNowPositionX(),e=this.nowMino.getNowPositionY(),i=this.nowMino.getMinoInfo();0!==n;){for(let o=0;o<i.length;o++){let s=!1;for(let n=0;n<i[o].length;n++)if(""!==i[o][n]){if(e+o<0){this.nowMino.down(),s=!0;continue}if(t+n<0){this.nowMino.right(),s=!0;continue}}if(s){t=this.nowMino.getNowPositionX(),e=this.nowMino.getNowPositionY(),i=this.nowMino.getMinoInfo(),n++;continue}}0!==n&&(n=0)}},this.getChangeField=t=>{let e=t.getNowPositionX(),i=t.getNowPositionY(),n=t.getMinoInfo(),o=t.getRotate(),s=this.nowFieldShape;for(let t=0;t<s.length;t++)for(let e=0;e<s[t].length;e++)1===s[t][e][1]&&(s[t][e][1]=0,s[t][e][0]="");for(let t=0;t<n.length;t++)for(let r=0;r<n[t].length;r++){let a=n[t][r];""!==a&&2!==s[i+t][e+r][1]&&(s[i+t][e+r][1]=1,s[i+t][e+r][0]=a,s[i+t][e+r][3]=o)}return s},this.confirmField=()=>{for(let t=0;t<this.nowFieldShape.length;t++)for(let e=0;e<this.nowFieldShape[t].length;e++)1===this.nowFieldShape[t][e][1]&&(this.nowFieldShape[t][e][1]=2)},this.gameOver=()=>{this.gameOverCallBack(),this.isGameOver=!0,document.removeEventListener("keydown",this.keyBoardEvent),window.clearInterval(this.alwaysInterval)},this.gameClear=()=>{this.isGameOver||(this.gameClearCallBack(),document.removeEventListener("keydown",this.keyBoardEvent),window.clearInterval(this.alwaysInterval))},this.checkAnserPosi=()=>{this.nowMino.checkNowPositionIsAnsPosition()&&(this.contactCount=this.contactCount+1,this.confirmField(),this.changeRandomNextMino(),this.nowFieldShape=this.getChangeField(this.nowMino),this.render({blockSize:this.blockSize,minoIndex:this.nowMino.getMinoId(),minoTransform:{x:this.nowMino.getNowPositionX(),y:this.nowMino.getNowPositionY(),rotate:this.nowMino.getRotate()},isChangeMino:!0}),this.successCallback(this.nowMino))},this.keyBoardEvent=t=>{if(!this.isGameOver){switch(t.code){case"ArrowUp":this.keyUpEvent();break;case"ArrowDown":this.keyDownEvent();break;case"ArrowRight":this.keyRightEvent();break;case"ArrowLeft":this.keyLeftEvent();break;case"Slash":this.keyLRotateEvent();break;case"IntlRo":this.keyRRotateEvent()}this.checkAnserPosi()}},this.addMinosInfo=t=>{this.minosInfo.push(t)},this.splitField=()=>{this.changeNextMino();let t=1;this.nowMino.changeMinoNumber(t);let e=0,i=[1,1];for(;;)if(this.canDown())this.nowMino.down(),e=0,this.nowFieldShape=this.getChangeField(this.nowMino);else if(this.checkOverHangRight(this.nowMino.getNowPositionX()+1,this.nowMino.getNowPositionY(),this.nowMino.getMinoInfo()))this.nowMino.right();else if(this.minosInfo.length>=1)this.confirmField(),this.changeNextMino(),t++,e=0,this.nowMino.changeMinoNumber(t);else{if(0==e)this.confirmField(),t++,i=(0,c.r)(f.L5.slice());else if(i.splice(0,1),0===i.length)break;this.nowMino=new d(i[0],[]),e++,this.nowMino.changeMinoNumber(t)}return this.addBlockRandomContactMinos(),this.nowFieldShape},this.addBlockRandomContactMinos=()=>{for(;!this.checkFieldFilled();){let t=1,e=1;for(;e>=1;){let i=this.getPositionsSameValueFromField(t.toString());e=i.length;let n=[];for(let t=e-1;t>=0;t--){let e=i[t][1],o=i[t][0];this.nowFieldShape.length>o+1&&""===this.nowFieldShape[o+1][e][0]&&n.push([o+1,e]),o-1>=0&&""===this.nowFieldShape[o-1][e][0]&&n.push([o-1,e]),this.nowFieldShape[0].length>e+1&&""===this.nowFieldShape[o][e+1][0]&&n.push([o,e+1]),e-1>=0&&""===this.nowFieldShape[o][e-1][0]&&n.push([o,e-1])}if(n.length>0){let e=n[(0,c.DV)(n)];this.nowFieldShape[e[0]][e[1]][0]=t.toString()}t++}}},this.checkFieldFilled=()=>{for(let t=this.nowFieldShape.length-1;t>=0;t--)for(let e=this.nowFieldShape[t].length-1;e>=0;e--)if(""===this.nowFieldShape[t][e][0])return!1;return!0},this.destroy=()=>{document.removeEventListener("keydown",this.keyBoardEvent)},this.getPositionsSameValueFromField=t=>{let e=[];for(let i=0;i<this.nowFieldShape.length;i++)for(let n=0;n<this.nowFieldShape[i].length;n++)this.nowFieldShape[i][n][0]===t&&e.push([i,n]);return e},this.setBlockSize=t=>{this.blockSize=t},this.nowFieldShape=[];for(let i=0;i<e;i++){var p=[];for(let e=0;e<t;e++)p.push(["",0,!0,0]);this.nowFieldShape.push(p)}this.minosInfo=[];for(let t=0;t<i.length;t++){let e=new d(i[t],n[t]);e.setMinoId(String(t)),this.minosInfo.push(e)}this.normalizeMinosInfo=[],this.nowMino=this.minosInfo[0],this.endCount=0,this.contactCount=0,this.blockSize=0,this.render=o,this.successCallback=s,this.conflictCallback=r,this.width=t,this.height=e,this.gameClearCallBack=a,this.gameOverCallBack=l,this.isGameOver=!1,this.isAlredyStart=!1,this.isUseUp=w===f.LA.FALL_SPEED[0].label,this.isUseRotate=(null===(m=f.LA.USE_UP.find(t=>t.label===u))||void 0===m?void 0:m.value)||f.LA.USE_ROTATE[0].value,this.fallSpeed=(null===(g=f.LA.FALL_SPEED.find(t=>t.label===w))||void 0===g?void 0:g.value)||f.LA.FALL_SPEED[0].value}}var w=i(917),m=i(6465),g=i.n(m),p=t=>{let{imgPath:e,width:i}=t;return(0,n.BX)(n.HY,{children:[""===e?(0,n.tZ)("div",{className:g().dynamic([["f560e2c1acfd5019",[i]]])+" block"}):(0,n.tZ)("img",{src:e,className:g().dynamic([["f560e2c1acfd5019",[i]]])+" block"}),(0,n.tZ)(g(),{id:"f560e2c1acfd5019",dynamic:[i],children:".block.__jsx-style-dynamic-selector{width:".concat(i,"px;aspect-ratio:1/1}")})]})};let x=t=>{let{width:e,shape:i,cssStyle:o}=t;return(0,n.tZ)("div",{css:o,children:i.map((t,i)=>{let o=t.map((t,o)=>(0,n.tZ)(p,{imgPath:t,width:e},"".concat(i,",").concat(o)));return(0,n.tZ)("div",{css:(0,w.iv)({display:"flex"}),children:o},i)})})};var b=i(990);let k=t=>{let{blockSize:e,minosInfo:i,minoIndex:n,minoTransform:o,minoRefs:s,init:r}=t,a={x:0,y:0},l=i[n][0].length-i[n].length,h=Math.abs(o.rotate%4);(1===h||3===h)&&(a={x:-l/2,y:l/2}),b.ZP.to(s.current[n].current,{x:(o.x+a.x)*e,y:(o.y+a.y)*e,rotation:90*o.rotate,duration:r?0:.5})},y=t=>{let{width:e,height:i,minosInfo:s,ansPositions:r,gameClearCallBack:a,gameOverCallBack:l,useUp:h,useRotate:c,speed:d,blockSize:f}=t,m=(0,o.useRef)(!1),g=(0,o.useRef)(null),p=(0,o.useRef)(0),[b,y]=(0,o.useState)(s.map(t=>({enable:!1,x:0,y:0,rotate:0}))),M=(0,o.useRef)([]);s.forEach((t,e)=>{M.current[e]=(0,o.createRef)()});let v=(0,o.useRef)([]);s.forEach((t,e)=>{v.current[e]=(0,o.createRef)()});let _=t=>{let{blockSize:e,minoIndex:i,minoTransform:n,isChangeMino:o}=t,r=n.rotate%4-b[i].rotate%4;o||(3===r?r=-1:-3!==r||(r=1)),b[i]={enable:!0,rotate:b[i].rotate+r,x:n.x,y:n.y},y([...b]),k({blockSize:e,minosInfo:s,minoIndex:i,minoTransform:b[i],minoRefs:M,init:o}),p.current+=1,window.setTimeout(()=>{p.current-=1},500),M.current[i]&&M.current[i].current&&(M.current[i].current.style.display="block")},P=t=>{},I=t=>{if(0!==p.current||!v.current[t]||!v.current[t].current)return;let e=v.current[t].current;e&&(e.style.animation="buruburu 0.2s linear 1"),window.setTimeout(()=>{e&&(e.style.animation="")},300)};(0,o.useEffect)(()=>{m.current||(m.current=!0,S.current=new u(e,i,s,r,_,P,I,a,l,h,c,d),S.current.start())},[m]),(0,o.useEffect)(()=>{g.current&&(S.current.setBlockSize(f),b.forEach((t,e)=>{k({blockSize:f,minosInfo:s,minoIndex:e,minoTransform:t,minoRefs:M,init:!0})}))},[f,M]);let S=(0,o.useRef)(null);return(0,n.BX)(n.HY,{children:[(0,n.tZ)("style",{children:"@keyframes hurueru {\n            0% {transform: translate(0px, 0px) rotateZ(0deg)}\n            25% {transform: translate(10px, 10px) rotateZ(2deg)}\n            50% {transform: translate(0px, 10px) rotateZ(0deg)}\n            75% {transform: translate(10px, 0px) rotateZ(-2deg)}\n            100% {transform: translate(0px, 0px) rotateZ(0deg)}\n          }\n          @keyframes buruburu {\n            0% {transform: translate(0px, 0px) rotateZ(0deg)}\n            25% {transform: translate(10px, 10px) rotateZ(2deg)}\n            50% {transform: translate(0px, 10px) rotateZ(0deg)}\n            75% {transform: translate(10px, 0px) rotateZ(-2deg)}\n            100% {transform: translate(0px, 0px) rotateZ(0deg)}\n          }"}),(0,n.tZ)("div",{ref:g,css:(0,w.iv)({backgroundColor:"rgba(255,255,255,0.4)",width:"100%",height:"100%",position:"relative"}),children:b.map((t,e)=>(0,n.tZ)("div",{ref:M.current[e],css:(0,w.iv)({display:"none",position:"absolute",top:"0",left:"0"}),children:(0,n.tZ)("div",{ref:v.current[e],children:(0,n.tZ)(x,{width:f,shape:s[e]})})},e))})]})};var M=i(9213),v=i.n(M),_=i(1664),P=i.n(_),I=i(5317);let S=(0,w.iv)({display:"flex",gap:"0.8vw"}),E=(0,w.iv)({opacity:"0",transform:"translate(0px, -100px)",fontFamily:"Tetris",fontSize:"2.5rem",textAlign:"center",color:"#00ff00"}),N=t=>{let{visible:e,...i}=t,s=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(null),h=(0,o.useRef)(null),c=(0,o.useRef)(null),d=(0,o.useRef)(null),f=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(e){let t={autoAlpha:1,duration:1,ease:I.sm.easeOut,x:0,y:0};b.ZP.to(s.current,{delay:.3,...t}),b.ZP.to(r.current,{delay:.5,...t}),b.ZP.to(a.current,{delay:.7,...t}),b.ZP.to(l.current,{delay:.3+.6000000000000001,...t}),b.ZP.to(h.current,{delay:1.1,...t}),b.ZP.to(c.current,{delay:1.3,...t}),b.ZP.to(d.current,{delay:.3+1.2000000000000002,...t}),b.ZP.to(f.current,{delay:.3+1.4000000000000001,...t})}},[s,r,a,l,h,c,d,f,e]),(0,n.BX)("div",{css:S,...i,children:[(0,n.tZ)("span",{css:E,ref:s,children:"G"}),(0,n.tZ)("span",{css:E,ref:r,children:"A"}),(0,n.tZ)("span",{css:E,ref:a,children:"M"}),(0,n.tZ)("span",{css:E,ref:l,children:"E"}),(0,n.tZ)("span",{css:E,ref:h,children:"C"}),(0,n.tZ)("span",{css:E,ref:c,children:"L"}),(0,n.tZ)("span",{css:E,ref:d,children:"E"}),(0,n.tZ)("span",{css:E,ref:f,children:"R"})]})};var R=t=>{let{isGameClear:e,count:i,ranking:r,retryCallback:a}=t,l=(0,o.useRef)(null);(0,o.useEffect)(()=>{e&&b.ZP.to(l.current,{autoAlpha:1,duration:3,x:0,y:0})},[l,e]);let h=(0,s.useRouter)();return(0,n.BX)(n.HY,{children:[(0,n.tZ)("div",{ref:l,css:(0,w.iv)({pointerEvents:e?"auto":"none"}),className:"jsx-10b250ef03e2f8b8 "+(v().old_overlay||""),children:(0,n.tZ)("div",{className:"jsx-10b250ef03e2f8b8 "+(v().old_content||""),children:(0,n.BX)("div",{className:"jsx-10b250ef03e2f8b8 content-wrapper",children:[(0,n.tZ)(N,{visible:e}),(0,n.BX)("div",{className:"jsx-10b250ef03e2f8b8 countWrapper",children:[(0,n.tZ)("span",{className:"jsx-10b250ef03e2f8b8 countLabel",children:"クリアタイム"}),(0,n.tZ)("span",{className:"jsx-10b250ef03e2f8b8 count",children:i}),(0,n.tZ)("span",{className:"jsx-10b250ef03e2f8b8 countUnit",children:"秒"})]}),(0,n.BX)("div",{className:"jsx-10b250ef03e2f8b8 buttonWrapper",children:[(0,n.tZ)(P(),{href:{pathname:"/",query:{...h.query}},passHref:!0,children:(0,n.tZ)("button",{className:"jsx-10b250ef03e2f8b8 button button__backHome",children:"BackHome"})}),(0,n.tZ)("button",{onClick:a,className:"jsx-10b250ef03e2f8b8 button button__retry",children:"Retry"})]})]})})}),(0,n.tZ)(g(),{id:"10b250ef03e2f8b8",children:'.title.jsx-10b250ef03e2f8b8{font-family:"Tetris";font-size:2rem;text-align:center}.content-wrapper.jsx-10b250ef03e2f8b8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:-webkit-calc(var(--vh,1vh)*7);gap:-moz-calc(var(--vh,1vh)*7);gap:calc(var(--vh,1vh)*7);-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.countLabel.jsx-10b250ef03e2f8b8{font-family:"Tetris";font-size:1rem;font-weight:bold}.count.jsx-10b250ef03e2f8b8{font-family:"Tetris";font-size:3rem;text-align:center;margin-left:-webkit-calc(18*var(--base));margin-left:-moz-calc(18*var(--base));margin-left:calc(18*var(--base))}.countUnit.jsx-10b250ef03e2f8b8{font-family:"Tetris";font-size:1rem;font-weight:bold;margin-left:-webkit-calc(20*var(--base));margin-left:-moz-calc(20*var(--base));margin-left:calc(20*var(--base))}.ranking.jsx-10b250ef03e2f8b8{font-family:"Tetris";font-size:2rem;text-align:center}.buttonWrapper.jsx-10b250ef03e2f8b8{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:10%;width:73%}.button.jsx-10b250ef03e2f8b8{font-family:"Tetris";border:1px solid#aaa;-webkit-border-radius:18px;-moz-border-radius:18px;border-radius:18px;padding:3%5%;text-align:center;width:30%;min-width:138px}.button__retry.jsx-10b250ef03e2f8b8{color:green}.button__backHome.jsx-10b250ef03e2f8b8{color:blue}'})]})};let F=(0,w.iv)({display:"flex",gap:"0.8vw"}),Z=(0,w.iv)({opacity:"0",transform:"translate(0px, -17px)",fontFamily:"Tetris",fontSize:"2.5rem",textAlign:"center",color:"#ff0000"}),A={autoAlpha:1,duration:2,x:0,y:0},C=t=>{let{visible:e,...i}=t,s=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(null),h=(0,o.useRef)(null),c=(0,o.useRef)(null),d=(0,o.useRef)(null),f=(0,o.useRef)(null);return(0,o.useEffect)(()=>{e&&(b.ZP.to(s.current,{delay:.6,...A}),b.ZP.to(r.current,{delay:.8,...A}),b.ZP.to(a.current,{delay:1,...A}),b.ZP.to(l.current,{delay:1.2000000000000002,...A}),b.ZP.to(h.current,{delay:1.4,...A}),b.ZP.to(c.current,{delay:1.6,...A}),b.ZP.to(d.current,{delay:1.8000000000000003,...A}),b.ZP.to(f.current,{delay:2,...A}))},[s,r,a,l,h,c,d,f,e]),(0,n.BX)("div",{css:F,...i,children:[(0,n.tZ)("span",{css:Z,ref:s,children:"G"}),(0,n.tZ)("span",{css:Z,ref:r,children:"A"}),(0,n.tZ)("span",{css:Z,ref:a,children:"M"}),(0,n.tZ)("span",{css:Z,ref:l,children:"E"}),(0,n.tZ)("span",{css:Z,ref:h,children:"O"}),(0,n.tZ)("span",{css:Z,ref:c,children:"V"}),(0,n.tZ)("span",{css:Z,ref:d,children:"E"}),(0,n.tZ)("span",{css:Z,ref:f,children:"R"})]})};var z=t=>{let{isGameOver:e,retryCallback:i}=t,r=(0,o.useRef)(null);(0,o.useEffect)(()=>{e&&b.ZP.to(r.current,{autoAlpha:1,duration:5,x:0,y:0})},[r,e]);let a=(0,s.useRouter)();return(0,n.BX)(n.HY,{children:[(0,n.tZ)("div",{ref:r,css:(0,w.iv)({pointerEvents:e?"auto":"none"}),className:"jsx-87a0b5cc6f5ea665 "+(v().old_overlay||""),children:(0,n.tZ)("div",{className:"jsx-87a0b5cc6f5ea665 "+(v().old_content||""),children:(0,n.BX)("div",{className:"jsx-87a0b5cc6f5ea665 content-wrapper",children:[(0,n.tZ)(C,{visible:e}),(0,n.BX)("div",{className:"jsx-87a0b5cc6f5ea665 buttonWrapper",children:[(0,n.tZ)(P(),{href:{pathname:"/",query:{...a.query}},passHref:!0,children:(0,n.tZ)("button",{className:"jsx-87a0b5cc6f5ea665 button button__backHome",children:"BackHome"})}),(0,n.tZ)("button",{onClick:i,className:"jsx-87a0b5cc6f5ea665 button button__retry",children:"Retry"})]})]})})}),(0,n.tZ)(g(),{id:"87a0b5cc6f5ea665",children:'.content-wrapper.jsx-87a0b5cc6f5ea665{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:30vw;min-width:300px}.countLabel.jsx-87a0b5cc6f5ea665{font-family:"Tetris";font-size:1rem;font-weight:bold}.count.jsx-87a0b5cc6f5ea665{font-family:"Tetris";font-size:3rem;text-align:center;margin-left:-webkit-calc(18*var(--base));margin-left:-moz-calc(18*var(--base));margin-left:calc(18*var(--base))}.countUnit.jsx-87a0b5cc6f5ea665{font-family:"Tetris";font-size:1rem;font-weight:bold;margin-left:-webkit-calc(20*var(--base));margin-left:-moz-calc(20*var(--base));margin-left:calc(20*var(--base))}.ranking.jsx-87a0b5cc6f5ea665{font-family:"Tetris";font-size:2rem;text-align:center}.buttonWrapper.jsx-87a0b5cc6f5ea665{margin-top:-webkit-calc(var(--vh,1vh)*10);margin-top:-moz-calc(var(--vh,1vh)*10);margin-top:calc(var(--vh,1vh)*10);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:10%;width:73%}.button.jsx-87a0b5cc6f5ea665{font-family:"Tetris";border:1px solid#aaa;-webkit-border-radius:18px;-moz-border-radius:18px;border-radius:18px;padding:3%5%;text-align:center;width:30%;min-width:138px}.button__retry.jsx-87a0b5cc6f5ea665{color:green}.button__backHome.jsx-87a0b5cc6f5ea665{color:blue}'})]})},T=i(3714),L=i.n(T);let H=(0,w.iv)({opacity:"0.2",pointerEvents:"none"});var B=t=>{let{arrowUp:e,arrowLeft:i,arrowRight:s,arrowDown:r,rotateLeft:a,rotateRight:l,disabledLeft:h,disabledRight:c,disabledUp:d,disabledBottom:f,disabledL:u,disabledR:w}=t,m=(t,e)=>{p.current=e,window.setTimeout(()=>{p.current===e&&(x.current=window.setInterval(()=>{t()},100),p.current=0)},500)},g=()=>{window.clearInterval(x.current),p.current=0},p=(0,o.useRef)(0),x=(0,o.useRef)(0);return(0,n.BX)(n.HY,{children:[(0,n.BX)("div",{className:L().crossKeyWrapper,children:[(0,n.tZ)("div",{className:"".concat(L().arrow," ").concat(L().arrow__up),onClick:e,onPointerDown:()=>{g(),m(e,1)},css:d?H:void 0,onPointerUp:g,onPointerOut:g}),(0,n.tZ)("div",{className:"".concat(L().arrow," ").concat(L().arrow__left),onClick:i,onPointerDown:()=>{g(),m(i,2)},css:h?H:void 0,onPointerUp:g,onPointerOut:g}),(0,n.tZ)("div",{className:"".concat(L().arrow," ").concat(L().arrow__right),onClick:s,onPointerDown:()=>{g(),m(s,3)},css:c?H:void 0,onPointerUp:g,onPointerOut:g}),(0,n.tZ)("div",{className:"".concat(L().arrow," ").concat(L().arrow__down),onClick:r,onPointerDown:()=>{g(),m(r,4)},css:f?H:void 0,onPointerUp:g,onPointerOut:g})]}),(0,n.tZ)("div",{className:L().LRWrapper,children:(0,n.BX)("div",{className:L().LRWrapper__row,children:[(0,n.tZ)("div",{className:"".concat(L().rotate," ").concat(L().rotate__left),onClick:a,css:u?H:void 0}),(0,n.tZ)("div",{className:"".concat(L().rotate," ").concat(L().rotate__right),onClick:l,css:w?H:void 0})]})})]})};async function O(t,e){let i=await (0,c._$)(t,f.LA.IMG_MAX_SIZE,e);if(!1===i)return!1;let n=i[0].length,o=i.length,s=[];s.push(f.L5[(0,c.DV)(f.L5)]);let r=new u(n,o,s,[[0,0]],()=>{},()=>{},()=>{},()=>{},()=>{},"","",""),a=r.splitField(),l=D(a,i),h=U(n,o+f.LA.blankHeight);return{WIDTH:n,HEIGHT:o,MINOSINFO:l.OUTPUTMINOS,ANSPOSITIONS:l.OUTPUTPOSITIONS,ELEMENT_WIDTH:h.WIDTH,ELEMENT_HEIGHT:h.HEIGHT}}let D=(t,e)=>{let i="",n=[],o=[];for(;"0"!==j(t);){i=j(t);let s=t[0].length,r=t.length,a=0,l=0;for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)t[e][n][0]===i&&(s>n&&(s=n),a<n&&(a=n),r>e&&(r=e),l<e&&(l=e));let h=(0,c.e8)(t,s,r,a,l),d=(0,c.e8)(e,s,r,a,l);for(let t=0;t<h.length;t++)for(let e=0;e<h[t].length;e++)h[t][e][0]!==i&&(d[t][e]="");t=W(t,i),n.push(d),o.push([r,s])}return{OUTPUTMINOS:n,OUTPUTPOSITIONS:o}},j=t=>{for(let e=0;e<t.length;e++)for(let i=0;i<t[e].length;i++)if(""!==t[e][i][0])return t[e][i][0];return"0"},W=(t,e)=>{for(let i=0;i<t.length;i++)for(let n=0;n<t[i].length;n++)t[i][n][0]===e&&(t[i][n][0]="");return t},U=(t,e)=>{let i=window.innerWidth,n=window.innerHeight,o=i/n,s=10,r=0,a=0;if(o>=1?(r=150*(s=n/315),a=280*s):o<1&&(r=150*(s=i/812),a=280*s),r/t>a/e){for(let i=Math.floor(a);i>=1;i--)if(i%e==0)return{WIDTH:i*(t/e),HEIGHT:i}}else for(let i=Math.floor(r);i>=1;i--)if(i%t==0)return{WIDTH:i,HEIGHT:i*(e/t)};return{WIDTH:r,HEIGHT:r*(e/t)}};var X=i(6767),G=JSON.parse('{"nm":"Wait ","mn":"","layers":[{"ty":4,"nm":"Shape Layer 1","mn":"","sr":1,"st":0,"op":600,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[-233,74,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.71,"y":0},"i":{"x":0.298,"y":1},"s":[308,569,0],"t":0,"ti":[-36.028,0,0],"to":[36.805,0,0]},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[745,569,0],"t":40}],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Group","nm":"Rectangle 1","ix":1,"cix":2,"np":2,"it":[{"ty":"rc","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Rect","nm":"Rectangle Path 1","d":1,"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":20,"ix":4},"s":{"a":0,"k":[50,36.765],"ix":2}},{"ty":"fl","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0,0.8,0.498],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[-233,74],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":1},{"ty":4,"nm":"W  Outlines","mn":"","sr":1,"st":0,"op":600,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[32.396,-0.244,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.458,"y":0},"i":{"x":0.291,"y":1},"s":[408.355,587.5,0],"t":2,"ti":[0,0,0],"to":[0,-13.288,0]},{"o":{"x":0.706,"y":0},"i":{"x":0.667,"y":1},"s":[408.355,403.5,0],"t":16.574,"ti":[0,-30.667,0],"to":[0,0,0]},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[408.355,587.5,0],"t":32.19140625}],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Group","nm":"W","ix":1,"cix":2,"np":3,"it":[{"ty":"sh","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Group","nm":"W","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[53.026,-47.988],[46.303,-20.314],[39.179,-47.988],[27.614,-47.988],[21.066,-20.368],[14.353,-47.988],[0.492,-47.988],[13.242,0],[26.145,0],[32.484,-26.473],[39.198,0],[51.573,0],[64.301,-47.988]]},"ix":2}},{"ty":"fl","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0,0.8,0.498],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":2},{"ty":4,"nm":"a Outlines","mn":"","sr":1,"st":10,"op":610,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[22.957,-0.119,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.291,"y":1},"s":[521.476,587.75,0],"t":3.561,"ti":[0,0,0],"to":[0,-30.833,0]},{"o":{"x":0.706,"y":0},"i":{"x":0.667,"y":1},"s":[521.476,402.75,0],"t":19.178,"ti":[0,-30.833,0],"to":[0,0,0]},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[521.476,587.75,0],"t":34.794921875}],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Group","nm":"a","ix":1,"cix":2,"np":5,"it":[{"ty":"sh","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Group","nm":"a","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[45.677,0],[30.626,-47.988],[15.052,-47.988],[0.237,0],[12.196,0],[15.077,-9.457],[27.933,-9.457],[30.645,0]]},"ix":2}},{"ty":"sh","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Group","nm":"a","ix":2,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[21.463,-33.854],[25.345,-19.934],[17.581,-19.934]]},"ix":2}},{"ty":"mm","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Filter - Merge","nm":"Merge Paths 1","mm":1},{"ty":"fl","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0,0.8,0.498],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":3},{"ty":4,"nm":"i Outlines","mn":"","sr":1,"st":0,"op":600,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[10.94,-0.119,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.291,"y":1},"s":[605.442,587.75,0],"t":6.164,"ti":[0,0,0],"to":[0,-30.667,0]},{"o":{"x":0.706,"y":0},"i":{"x":0.667,"y":1},"s":[605.442,403.75,0],"t":21.781,"ti":[0,-30.667,0],"to":[0,0,0]},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[605.442,587.75,0],"t":37.396484375}],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Group","nm":"i","ix":1,"cix":2,"np":3,"it":[{"ty":"sh","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Group","nm":"i","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[3.575,-47.988],[3.575,0],[18.305,0],[18.305,-47.988]]},"ix":2}},{"ty":"fl","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0,0.8,0.498],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":4},{"ty":4,"nm":"t Outlines","mn":"","sr":1,"st":0,"op":600,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[17.053,0.006,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.291,"y":1},"s":[678.667,588,0],"t":8.768,"ti":[0,0,0],"to":[0,-30.667,0]},{"o":{"x":0.706,"y":0},"i":{"x":0.667,"y":1},"s":[678.667,404,0],"t":24.383,"ti":[0,-30.667,0],"to":[0,0,0]},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[678.667,588,0],"t":40}],"ix":2},"r":{"a":0,"k":0,"ix":10},"sa":{"a":0,"k":0},"o":{"a":0,"k":100,"ix":11}},"ef":[],"shapes":[{"ty":"gr","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Group","nm":"t","ix":1,"cix":2,"np":3,"it":[{"ty":"sh","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Group","nm":"t","ix":1,"d":1,"ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[33.855,-36.492],[33.855,-47.988],[0,-47.988],[0,-36.492],[9.949,-36.492],[9.949,0],[23.906,0],[23.906,-36.492]]},"ix":2}},{"ty":"fl","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Graphic - Fill","nm":"Fill 1","c":{"a":0,"k":[0,0.8,0.498],"ix":4},"r":1,"o":{"a":0,"k":100,"ix":5}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[0,0],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]}],"ind":5}],"ddd":0,"h":1080,"w":1080,"meta":{"a":"","k":"","d":"","g":"@lottiefiles/toolkit-js 0.22.1","tc":"#000000"},"v":"5.8.1","fr":60,"op":41,"ip":0,"assets":[]}'),Y=i(3354);let V=()=>{document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowRight"}))},q=()=>{document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowLeft"}))},K=()=>{document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowUp"}))},J=()=>{document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowDown"}))},Q=()=>{document.dispatchEvent(new KeyboardEvent("keydown",{code:"Slash"}))},$=()=>{document.dispatchEvent(new KeyboardEvent("keydown",{code:"IntlRo"}))},tt=(0,w.iv)({width:"100vw",position:"absolute",top:"0",left:"0",transformOrigin:"left top"});var te=()=>{(0,o.useLayoutEffect)(c.NB);let t=(0,s.useRouter)(),e=t.query.MODEL_IMAGE,i=t.query.FALL_SPEED,r=t.query.DIVIDER_NUM,l=t.query.USE_ROTATE,[d,u]=(0,o.useState)(null),m=(0,o.useRef)(null),g=(0,o.useRef)(null),p=(0,o.useRef)(null),x=(0,o.useRef)(null),[k,M]=(0,o.useState)(0),[v,_]=(0,Y.N)();(0,o.useEffect)(()=>{if(!g.current||!p.current||!x.current)return;let t=.9*_;if(v/_>1){let e=Math.min(.25*v/g.current.clientWidth,t/g.current.clientHeight),i=Math.min(.35*v/p.current.clientWidth,t/p.current.clientHeight),n=Math.min(.25*v/x.current.clientWidth,t/x.current.clientHeight),o=e*g.current.clientWidth,s=i*p.current.clientWidth,r=n*x.current.clientWidth,a=e*g.current.clientHeight,l=i*p.current.clientHeight,h=n*x.current.clientHeight,c=(v-o-s-r)/4;b.ZP.set(g.current,{x:c,y:(_-a)/2,scale:e}),b.ZP.set(p.current,{x:2*c+o,y:(_-l)/2,scale:i}),b.ZP.set(x.current,{x:3*c+o+s,y:(_-h)/2,scale:n})}else{let e=.45*v,i=Math.min(e/p.current.clientWidth,t/p.current.clientHeight),n=Math.min(e/g.current.clientWidth,.45*_/g.current.clientHeight),o=Math.min(e/x.current.clientWidth,.45*_/x.current.clientHeight),s=n*g.current.clientWidth,r=i*p.current.clientWidth,a=o*x.current.clientWidth,l=i*p.current.clientHeight,h=n*g.current.clientHeight,c=o*x.current.clientHeight,d=(v-r-e)/3,f=(_-h-1.2*c)/3;b.ZP.set(p.current,{x:d,y:(_-l)/2,scale:i}),b.ZP.set(g.current,{x:2*d+r+(e-s)/2,y:f,scale:n}),b.ZP.set(x.current,{x:2*d+r+(e-a)/2,y:2*f+h,scale:o})}M(v/d.WIDTH)},[g.current,p.current,x.current,v,_,d,e]);let P=async(t,e)=>{if(m.current&&(m.current=null),S.current=0,u(null),N(!1),Z(!1),"string"!=typeof t||"string"!=typeof e)return;let i=await O(t,e);u(i)};(0,o.useEffect)(()=>{(0,c.Sj)(),null===m.current&&(m.current=window.setInterval(I,1e3)),P(e,r)},[e,r]);let I=()=>{S.current=S.current+1},S=(0,o.useRef)(0),[E,N]=(0,o.useState)(!1),[F,Z]=(0,o.useState)(!1);return(!1===d&&t.push("/"),d)?(0,n.BX)(n.HY,{children:[(0,n.tZ)(a(),{children:(0,n.tZ)("title",{children:"絵トリス"})}),(0,n.BX)("main",{className:h().main,children:[(0,n.tZ)(R,{isGameClear:E,count:S.current,ranking:1,retryCallback:()=>{P(e,r)}}),(0,n.tZ)(z,{isGameOver:F,retryCallback:()=>{P(e,r)}}),(0,n.tZ)("div",{ref:g,css:[tt,(0,w.iv)({height:"".concat(100/d.WIDTH*d.HEIGHT,"vw")})],children:(0,n.tZ)("img",{src:t.query.MODEL_IMAGE,css:(0,w.iv)({width:"100%",maxHeight:"100%",objectFit:"contain"})})}),(0,n.tZ)("div",{ref:p,css:[tt,(0,w.iv)({height:"".concat(100/d.WIDTH*(d.HEIGHT+f.LA.blankHeight),"vw")})],children:(0,n.tZ)(y,{width:d.WIDTH,height:d.HEIGHT,minosInfo:d.MINOSINFO,ansPositions:d.ANSPOSITIONS,gameClearCallBack:()=>{window.setTimeout(()=>{N(!0)},500),null!==m.current&&window.clearInterval(m.current)},gameOverCallBack:()=>{window.setTimeout(()=>{Z(!0)},500),null!==m.current&&window.clearInterval(m.current)},useUp:"",useRotate:t.query.USE_ROTATE,speed:t.query.FALL_SPEED,blockSize:k})}),(0,n.tZ)("div",{ref:x,css:[tt,(0,w.iv)({height:"100vw"})],children:(0,n.tZ)(B,{disabledUp:i!==f.LA.FALL_SPEED[0].label,disabledL:l===f.LA.USE_ROTATE[0].label,disabledR:l===f.LA.USE_ROTATE[0].label,arrowUp:K,arrowDown:J,arrowLeft:q,arrowRight:V,rotateLeft:Q,rotateRight:$})})]}),(0,n.tZ)("footer",{className:h().footer})]}):(0,n.tZ)("div",{css:(0,w.iv)({position:"fixed",width:"100%",height:"100vh",top:"0"}),children:(0,n.tZ)(X.Z,{json:G})})}},3714:function(t){t.exports={crossKeyWrapper:"Controller_crossKeyWrapper__oJHYz",LRWrapper:"Controller_LRWrapper__LzK2T",LRWrapper__row:"Controller_LRWrapper__row__viWdj",arrow:"Controller_arrow__F9j9C",arrow__up:"Controller_arrow__up__bQflU",arrow__left:"Controller_arrow__left___ucJI",arrow__right:"Controller_arrow__right__sB8XO",arrow__down:"Controller_arrow__down__Zdm_f",rotate:"Controller_rotate__kFIpd",rotate__left:"Controller_rotate__left__l763b",rotate__right:"Controller_rotate__right__jnH_k"}},9213:function(t){t.exports={overlay:"Modal_overlay__Ca5IT",overlay__visible:"Modal_overlay__visible__N4t_j",content:"Modal_content__BWcLg",old_overlay:"Modal_old_overlay__t43By",old_content:"Modal_old_content__Hqa6V"}},3221:function(t){t.exports={main:"Play_main__jQ143",playWrapper:"Play_playWrapper__31ah6",modelImgWrapper:"Play_modelImgWrapper__6OxDl",modelImg:"Play_modelImg__Zl_va",etrisField:"Play_etrisField__Cr7JH",controller:"Play_controller__03rV5"}}},function(t){t.O(0,[296,802,260,115,664,465,351,774,888,179],function(){return t(t.s=5824)}),_N_E=t.O()}]);